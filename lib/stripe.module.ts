import { DynamicModule, Module } from '@nestjs/common';
import { StripeCoreModule } from './stripe-core.module';
import { StripeModuleOptions, StripeAsyncModuleOptions } from './interfaces';

/**
 * Import and provide base nestjs-stripe related classes.
 *
 * @module
 */
@Module({})
export class StripeModule {
  /**
   * Import the providers generated by nestjs-stripe core module.
   *
   * @param {StripeModuleOptions} options
   *
   * @returns {DynamicModule}
   */
  static forRoot(options: StripeModuleOptions): DynamicModule {
    return {
      module: StripeModule,
      imports: [StripeCoreModule.forRoot(options)],
    };
  }

  /**
   * Import the providers asynchronously generated by nestjs-stripe core module.
   *
   * @param {StripeAsyncModuleOptions} options
   *
   * @returns {DynamicModule}
   */
  static forRootAsync(options: StripeAsyncModuleOptions): DynamicModule {
    return {
      module: StripeModule,
      imports: [StripeCoreModule.forRootAsync(options)],
    };
  }
}
